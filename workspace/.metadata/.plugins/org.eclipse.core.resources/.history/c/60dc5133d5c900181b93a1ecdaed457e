/*
 * TimeTrigger.cpp
 *
 *  Created on: 13 ���. 2018 �.
 *      Author: Vitaliy
 */

#include "Arduino.h"
#include "ActionListenerHelper.h"

ActionListenerHelper::ActionListenerHelper(ActionEvent* _actionEvents){
	actionEvents=_actionEvents;
}

String* ActionListenerHelper::getEventNames(){
	int count=sizeof(actionEvents);

	String result[count];

	for(int i=0;i<count;i++){
		result[i]=actionEvents[i].getName();
	}

	return result;
}

ActionEvent ActionListenerHelper::buildActionEvent(String eventName,std::function<void(AbstractEvent)> _func){
	ActionEvent result=ActionEvent(eventName,_func);
	return result;
}

boolean ActionListenerHelper::executeActionEvent(String eventName,String arg){

	boolean result=false;

	for(int i=0;i<sizeof(actionEvents);i++){
		ActionEvent ae=actionEvents[i];
		if(ae.getName()==eventName){
			ae.executeFunction(arg);
			result=true;
			Serial.println("event="+eventName+" executed");
			break;
		}
	}

	return result;
}

