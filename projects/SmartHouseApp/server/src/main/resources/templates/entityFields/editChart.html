<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
<th:block th:replace="templates :: headImports" ></th:block>

<link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css" />
<link rel="stylesheet" href="chart/Chart.css">

</head>

<body>
	<header th:replace="templates :: MainPageHeader(url=${'listChart'}, text=${'Графики'})"></header>

	<div class="container">
		<h4 th:text="${pageHeader}"></h4>

		<form action="#" th:action="@{/saveView}" th:object="${metric}"
			method="post">
			<input type="hidden" th:field="*{id}">
			<table class="table table-dark table-striped">
				<tr>
					<td>Название</td>
					<td><input type="text" th:field="*{name}"></td>
				</tr>
				<tr>
					<td>Ось Y</td>
					<td><input type="text" th:field="*{description}"></td>
				</tr>
				<tr>
					<td>Показатель - виджет</td>
					<td><input type="checkbox" th:field="*{entityFieldView}"/></td>
				</tr>
				<tr>
					<td>Датчик - виджет</td>
					<td><input type="checkbox" th:field="*{entityView}"/></td>
				</tr>
				<tr>
					<td>График история - виджет</td>
					<td><input type="checkbox" th:field="*{chartView}"/></td>
				</tr>
				<tr>
					<td>Расположение легенды</td>
					<td>
						<select class="mdb-select md-form" th:field="*{legendPosition}">
				  			<option  th:each="lp : ${allLegendPositions}" th:selected="${lp.equals(currentLegendPosition)}" th:value="${lp}" th:text="${lp}">Option 1</option>
						</select>
					</td>
				</tr>
			</table>

			<table class="table table-dark table-striped">
				<thead>
					<tr>
						<th></th>
						<th>Устройство</th>
						<th>Датчик</th>
						<th>Значение</th>
						<th>Величина</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="entityField : ${allFields}">
						<td><input type="checkbox" name="fields"
							th:value="${entityField.id}" th:checked="${currentFields.containsKey(entityField.id)}" /></td>
						<td><label
							th:text="${entityField.getEntity().getDevice().getDescription()}"></label>
						</td>
						<td><label
							th:text="${entityField.getEntity().getEmoji()} + ${entityField.getEntity().getDescriptionByDescriptionField()}"></label>
						</td>
						<td><label
							th:text="${entityField.getEmoji()} + ${entityField.getDescriptionByDescriptionField()}"></label>
						</td>
						<td><label th:text="${entityField.measure}"></label></td>
					</tr>
					<!--  
	                <th:block th:each="entityField : ${viewChart.entityFields}">
	             	   <input type="checkbox" name="entityFields" th:value="${entityField.id}"/>
	               	   <label th:text="${entityField.getEntity().getDevice().getDescription()} + '' + ${entityField.getEntity().getEmoji()} + ${entityField.getEntity().getDescriptionByDescriptionField()}"></label>
	               </th:block>
	               -->
				</tbody>
			</table>

			<div>
				<input type="submit" class="btn btn-default" value="&#x1F4BE; Сохранить" />
				<a th:href="@{~/viewChart?id={id}(id=${metric.id})}"	class="btn btn-default">&#x1F441;Просмотр</a>
			</div>

		</form>
	</div>

	<footer th:replace="templates :: footer"></footer>

	<th:block th:replace="templates :: imports"></th:block>

</body>

</html>