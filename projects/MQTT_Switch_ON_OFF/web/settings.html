<!DOCTYPE html>
<!-- saved from url=(0025)http://192.168.0.50/setup -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Настройки устройства</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="./css/w3.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<script src="./js/DeviceLib.js"></script>
<script src="./js/settings.js"></script>
<script src="./js/menu.js"></script>

</head>

<body onload="onLoadPageComplete()">
				
<div id="leftSidebar" class="w3-sidebar w3-bar-block w3-light-grey w3-border-right w3-animate-left" style="display: none;">
	<button class="w3-bar-item w3-button w3-large" onclick="w3_close()">Свернуть</button>
	<a href="index.htm" class="w3-bar-item w3-button w3-hover-green">Главная</a>
	<a href="edit" class="w3-bar-item w3-button w3-hover-green">Редактировать файлы</a>
</div>
<!-- Page Content -->
<div id="mainContent">

	<div class="w3-container w3-teal w3-animate-opacity">
		<div class="w3-quarter w3-container w3-animate-opacity" style="width: 70px; height: 70px;">
			<button id="openNavBtn" class="w3-button w3-teal w3-xlarge" onclick="w3_open()" title="Открыть меню">☰</button>
		</div>
		<h1>Настройки устройства</h1>
	</div>
	
	<div class="w3-bar w3-teal">
	  <button class="w3-bar-item w3-button" onclick="openTab('device','Устройство')">Устройство</button>
	  <button class="w3-bar-item w3-button" onclick="openTab('net','Сеть')">Сеть</button>
	  <button class="w3-bar-item w3-button" onclick="openTab('sensors','Датчики')">Датчики</button>
	  <button class="w3-bar-item w3-button" onclick="openTab('publish','Публикация')">Публикация</button>
	  <button class="w3-bar-item w3-button" onclick="openTab('manage','Управление')">Управление</button>
	</div>

	<div id="mainContent" class="w3-card-4" style="width:90%; min-width: 600px; margin-top:10px; margin-left:10px;  margin-bottom:30px;">
	
		<div id="device" class="settingsTab reloadableSettingsContainer w3-container" style="display:none">
			<div class="w3-container w3-teal">
				<h2>Устройство</h2>
			</div>
		  
		  	<div id="device_content">
				<form id="device_form" class="w3-container">
				
						<div class="w3-row w3-green" style="height: 50px;">
							<h2>Общие настройки устройства</h2>
						</div>
						
						<input name="page" type="hidden" value="device"/>
						
						<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_deviceFirmWareVersion" for="espSettingsBox_deviceFirmWareVersion">Версия прошивки</label>
					  		</div>
					  		<div class="w3-half">
					  			<h3 id=espSettingsBox_deviceFirmWareVersion>Загружаю</h3>
					  		</div>
					  	</div>
	
						<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_DeviceId" for="espSettingsBox_DeviceId">ID устройства</label>
					  		</div>
					  		<div class="w3-half">
					  			<h3 id=espSettingsBox_DeviceId>Загружаю</h3>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_DeviceKind" for="espSettingsBox_DeviceKind">Тип устройства</label>
					  		</div>
					  		<div class="w3-half">
					  			<h3 id=espSettingsBox_DeviceKind>Загружаю</h3>	
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_DeviceDescription" for="espSettingsBox_DeviceDescription">Описание устройства</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_DeviceDescription" name="espSettingsBox_DeviceDescription" class="w3-input w3-border" type="text" value="обновляю"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_DeviceLocation" for="espSettingsBox_DeviceLocation">размещение устройства</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_DeviceLocation" name="espSettingsBox_DeviceLocation" class="w3-input w3-border" type="text" value="обновляю"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row w3-green" style="height: 50px;">
							<h2>Настройки экрана</h2>
						</div>
						
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_displayAlvaysOn" for="espSettingsBox_displayAlvaysOn">Экран всегда включен</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_displayAlvaysOn" name="espSettingsBox_displayAlvaysOn" class="w3-check" type="checkbox">
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_displayAutochange" for="espSettingsBox_displayAutochange">Автопереключение страниц экрана</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_displayAutochange" name="espSettingsBox_displayAutochange" class="w3-input w3-border" style="width:50%" 
					  				type="number" min="10" max="255" step="1" value="11"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row w3-green" style="height: 50px;">
							<h2>Настройки обновления датчиков</h2>
						</div>
						
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_refreshInterval" for="espSettingsBox_refreshInterval">Обновление значений датчиков</label>
					  		</div>
					  		<div class="w3-half">	
					  			<input id="espSettingsBox_refreshInterval" name="espSettingsBox_refreshInterval" class="w3-input w3-border" style="width:50%" 
					  				type="number" min="60" max="1024" step="1" value="61"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row w3-green" style="height: 50px;">
					  		<h2>Настройки доступа</h2>
					  	</div>
					  	
					  	<div class="w3-row" style="height: 50px;">
					  		<h2>Главная страница</h2>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_accessUser" for="espSettingsBox_accessUser">Пользователь главной страницы</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_accessUser" name="espSettingsBox_accessUser" class="w3-input w3-border" style="width:50%" 
					  				type="text" value="обновляю"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_accessPass" for="espSettingsBox_accessPass">Пароль главной страницы</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_accessPass" name="espSettingsBox_accessPass" class="w3-input w3-border" style="width:50%" type="password" value="*****"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_accessPassConfirm" for="espSettingsBox_accessPassConfirm">Подтверждение пароля</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_accessPassConfirm" name="espSettingsBox_accessPassConfirm" class="w3-input w3-border" style="width:50%" type="password" value="*****"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row" style="height: 50px;">
					  		<h2>Страница настроек</h2>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_settingsUser" for="espSettingsBox_settingsUser">Пользователь страницы настроек</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_settingsUser" name="espSettingsBox_settingsUser" class="w3-input w3-border" style="width:50%"
					  				 type="text" value="обновляю" required="required" pattern="[A-Za-z0-9]{1,20}"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_settingsPass" for="espSettingsBox_settingsPass">Пароль страницы настроек</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_settingsPass" name="espSettingsBox_settingsPass" class="w3-input w3-border" style="width:50%"
					  				type="password" value="*****"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_settingsPassConfirm" for="espSettingsBox_settingsPassConfirm">Подтверждение пароля</label>
					  		</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_settingsPassConfirm" name="espSettingsBox_settingsPassConfirm" class="w3-input w3-border" style="width:50%" type="password" value="*****"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row w3-green" style="height: 50px;">
					  		<h2>Синхронизация времени NTP</h2>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label id="lbl_ntpEnabled" for="espSettingsBox_ntpEnabled">Синхронизация времени разрешена</label>
					  		</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_ntpEnabled" name="espSettingsBox_ntpEnabled" class="w3-check" type="checkbox">
							</div>
					  	</div>

						<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_NTP_poolServerName" for="espSettingsBox_NTP_poolServerName">Имя сервера NTP</label>
							</div>
					  		<div class="w3-half">
					  			<input id="espSettingsBox_NTP_poolServerName" name="espSettingsBox_NTP_poolServerName" class="w3-input w3-border" style="width:50%" 
					  				type="text" value="обновляю"/>
					  		</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">		
					  			<label id="lbl_NTP_timeOffset" for="espSettingsBox_NTP_timeOffset">Разница времени с устройством (сек)</label>
					  		</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_NTP_timeOffset" name="espSettingsBox_NTP_timeOffset" class="w3-input w3-border" style="width:50%" type="number" min="1" step="1">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_NTP_updateInterval" for="espSettingsBox_NTP_updateInterval">Интервал синхронизации времени (сек)</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_NTP_updateInterval" name="espSettingsBox_NTP_updateInterval" class="w3-input w3-border" style="width:50%" type="number" min="120" step="10">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_NTP_timeTriggerInterval" for="espSettingsBox_NTP_timeTriggerInterval">Интервал отправки времени клиентам (мс)</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_NTP_timeTriggerInterval" name="espSettingsBox_NTP_timeTriggerInterval" class="w3-input w3-border" style="width:50%" type="number" min="100" step="10">
							</div>
					  	</div>
				</form>	
			</div>
			
			
			<p>
		  		<button id="saveDeviceSettingsBtn" class="w3-btn w3-teal" style="margin-left: 20px; margin-bottom: 20px;"
						onclick="submitCurrentForm();">Сохранить</button>
			</p>
			  
			<div id="device_msg" class="w3-card-4" style="margin-left:20px; margin-right:20px; margin-bottom:20px;"></div>
				
			<div style="height:20px;"></div>
		</div>

		<div id="net" class="settingsTab reloadableSettingsContainer" style="display:none">
			<div class="w3-container w3-teal">
				<h2>Сеть</h2>
			</div>	
			
			<p>Устройство может работать как точка доступа или подключаться к существующей WiFi</p>
			
			<div id="net_content">
				
				<form id="net_form" class="w3-container">
			  
			  		<input name="page" type="hidden" value="net"/>
			  
			  		<div class="w3-row">
						<div class="w3-half">
							<label id="lbl_isAccesPoint" for="espSettingsBox_isAccesPoint">Является точкой доступа</label>
						</div>
				  		<div class="w3-half">
							<input id="espSettingsBox_isAccesPoint" name="espSettingsBox_isAccesPoint" class="w3-check" type="checkbox">
						</div>
				  	</div>
					
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_ssidAP" for="espSettingsBox_ssidAP">SSID если в режиме точки доступа</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_ssidAP" name="espSettingsBox_ssidAP" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
					
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_ssid" for="espSettingsBox_ssid">SSID если в режиме клиента</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_ssid" name="espSettingsBox_ssid" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
					
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_password" for="espSettingsBox_password">Пароль WiFi</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_password" name="espSettingsBox_password" class="w3-input w3-border" style="width:50%" type="password" value="*****" >
							</div>
					  	</div>
					
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_passwordConfirm" for="espSettingsBox_passwordConfirm">Подтверждение Пароль WiFi</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_passwordConfirm" name="espSettingsBox_passwordConfirm" class="w3-input w3-border" style="width:50%" type="password" value="*****">
							</div>
					  	</div>
					
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_serverPort" for="espSettingsBox_serverPort">Порт Http</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_serverPort" name="espSettingsBox_serverPort" class="w3-input w3-border" style="width:50%" type="number" min="80" max="1024" step="1" value="80">
							</div>
					  	</div>
					
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_staticIp" for="espSettingsBox_staticIp">Использовать статический IP</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_staticIp" name="espSettingsBox_staticIp" class="w3-check" type="checkbox">
							</div>
					  	</div>
	
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_localIp" for="espSettingsBox_localIp">IP адресс в локальной сети (LocalIp)</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_localIp" name="espSettingsBox_localIp" class="w3-input w3-border" style="width:50%" type="text" 
									value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
	
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_apIp" for="espSettingsBox_apIp">IP адресс Если точка доступа (Access point IP)</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_apIp" name="espSettingsBox_apIp" class="w3-input w3-border" style="width:50%" type="text" 
										value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
	
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_gateIp" for="espSettingsBox_gateIp">IP адресс шлюза (GateWay)</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_gateIp" name="espSettingsBox_gateIp" class="w3-input w3-border" style="width:50%" type="text" 
										value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
	
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_subnetIp" for="espSettingsBox_subnetIp">IP адресс подсети (Subnet)</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_subnetIp" name="espSettingsBox_subnetIp" class="w3-input w3-border" style="width:50%" type="text" 
									value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
	
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_dnsIp" for="espSettingsBox_dnsIp">IP адресс DNS</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_dnsIp" name="espSettingsBox_dnsIp" class="w3-input w3-border" style="width:50%" type="text" 
									value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
	
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_dnsIp2" for="espSettingsBox_dnsIp2">IP адресс DNS2</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_dnsIp2" name="espSettingsBox_dnsIp2" class="w3-input w3-border" style="width:50%" type="text" 
										value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
	
					<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_serverIp" for="espSettingsBox_serverIp">IP адресс Сервера !!!SmartHouse</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_serverIp" name="espSettingsBox_serverIp" class="w3-input w3-border" style="width:50%" type="text" 
										value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
			
				</form>	  	
			  </div>
			  
			  <p>
		  		<button id="saveNetSettingsBtn" class="w3-btn w3-teal" style="margin-left: 20px; margin-bottom: 20px;"
						onclick="submitCurrentForm();">Сохранить</button>
			  </p>
			
			
			<div id="net_msg" class="w3-card-4" style="margin-left:20px; margin-right:20px; margin-bottom:20px;"></div>
				
			<div style="height:20px;"></div>
		</div>

		<div id="sensors" class="settingsTab reloadableSettingsContainer" style="display:none">
			<div class="w3-container w3-teal">
				<h2>Датчики</h2>
			</div>
			
			  <p>Настройки датчиков. Описание. Режим тревоги. Очереди </p>
			  
				<div id="sensors_content">
					<form id="sensors_form" class="w3-container">
					
					</form>  
				</div>
				  
			  
				<div id="sensors_msg" class="w3-card-4" style="margin-left:20px; margin-right:20px; margin-bottom:20px; display:none;"></div>
				
				<div style="height:20px;"></div>
		</div>
		
		 <div id="currentSensor_modal" class="w3-modal">
		    <div class="w3-modal-content w3-animate-top w3-card-4" style="width: 90%;">
		      	
		      	<header class="w3-container w3-teal"> 
			      <span onclick="closeSensorsPopup();" class="w3-button w3-display-topright">&times;</span>
			      <h3 id="currentSensor_header">Поточный датчик</h3>
			    </header>
		      	
		      	<div class="w3-container">
   
		        	<form id="currentSensor_form" class="w3-container">
		        		<input id="currentSensor_name" name="currentSensor_name" type="hidden">
		        		
		        		<div id=currentSensor_content>
		        		
						</div>						
						
					</form>
				
				 </div>
				 
				 <footer class="w3-container w3-teal w3-display-container">
				 	  <div id="currentSensor_msg" class="w3-card-4" style="margin-left:2px; margin-right:20x; margin-bottom:2px;"></div>
				 
				      <button id="currentSensor_saveBtn" class="w3-btn w3-white w3-border w3-border-red w3-round-large" style="margin-top: 2px; margin-bottom: 2px;"
							onclick="submitCurrentSensorForm();">Сохранить</button>
    			</footer>
	        
		  </div>
		</div>
		
		<div id="publish" class="settingsTab reloadableSettingsContainer" style="display:none">
			<div class="w3-container w3-teal">
				<h2>Публикация данных</h2>
			</div>
			
			  <p>Публикация значений сенсоров ThingSpeak, Mqtt, Http</p>
			  
				<div id="publish_content">
				
					<form id="publish_form" class="w3-container">
				  
					  	<div class="w3-row w3-green" style="height: 50px;">
					  		<h3>Отправка в ThingSpeak</h3>
					  	</div>
					  	
					  	<input name="page" type="hidden" value="publish"/>
					  	
					  	<div class="w3-row">
							<div class="w3-half">
					  			<label for="espSettingsBox_isThingSpeakEnabled">Отправка разрешена</label>
					  		</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_isThingSpeakEnabled" name="espSettingsBox_isThingSpeakEnabled" class="w3-check" type="checkbox">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">
								<label for="espSettingsBox_postDataToTSInterval">Интервал публикации значений (сек)</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_postDataToTSInterval" name="espSettingsBox_postDataToTSInterval" class="w3-input w3-border" style="width:50%" type="number" min="241" step="1">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">		
								<label for="espSettingsBox_thSkUsrKey">Ключ пользователя</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkUsrKey" name="espSettingsBox_thSkUsrKey" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">		
								<label for="espSettingsBox_thSkWKey">Ключ записи</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkWKey" name="espSettingsBox_thSkWKey" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">		
								<label for="espSettingsBox_thSkRKey">Ключ чтения</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkRKey" name="espSettingsBox_thSkRKey" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">		
								<label for="espSettingsBox_thSkChId">Канал</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkChId" name="espSettingsBox_thSkChId" class="w3-input w3-border" style="width:50%" type="number" min="1" step="1">
							</div>
					  	</div>
								
						<div class="w3-row">
							<div class="w3-half">								
								<label for="espSettingsBox_thSkTKey">Ключ твиттер</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkTKey" name="espSettingsBox_thSkTKey" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
			
						<div class="w3-row w3-green" style="height: 50px;">
							<h3>Настройки каналов управления ThingSpeak</h3>
						</div>
						
						<div class="w3-row">
							<div class="w3-half">		
								<label for="espSettingsBox_thSkWManageKey">Ключ записи</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkWManageKey" name="espSettingsBox_thSkWManageKey" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">		
								<label for="espSettingsBox_thSkRManageKey">Ключ чтения</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkRManageKey" name="espSettingsBox_thSkRManageKey" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">		
								<label for="espSettingsBox_thSkManageChId">Канал</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_thSkManageChId" name="espSettingsBox_thSkManageChId" class="w3-input w3-border" style="width:50%" type="number" min="1" step="1">
							</div>
					  	</div>	
			
						<div class="w3-row w3-green" style="height: 50px;">
							<h3>Отправка в очередь MQTT</h3>
						</div>	
						
						<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_isMqttEnabled">Отправка разрешена в индивидуальные очереди</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_isMqttEnabled" name="espSettingsBox_isMqttEnabled" class="w3-check" type="checkbox">
							</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_sendItemsToBaseQUeue">Отправка всех значений в главную очередь</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_sendItemsToBaseQUeue" name="espSettingsBox_sendItemsToBaseQUeue" class="w3-check" type="checkbox">
							</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_postDataToMqttInterval">Интервал отправки в Mqtt</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_postDataToMqttInterval" name="espSettingsBox_postDataToMqttInterval" class="w3-input w3-border" style="width:50%" type="number" min="240" step="1">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_mqtt_server">Сервер</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_mqtt_server" name="espSettingsBox_mqtt_server" class="w3-input w3-border" style="width:50%" type="text" min="241" step="1">
							</div>
					  	</div>
								
						<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_mqtt_user">Пользователь</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_mqtt_user" name="espSettingsBox_mqtt_user" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
								
						<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_mqtt_pass">Пароль</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_mqtt_pass" name="espSettingsBox_mqtt_pass" class="w3-input w3-border" style="width:50%" type="password" value="*****">
							</div>
					  	</div>
								
						<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_mqtt_topic">Базовая очередь</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_mqtt_topic" name="espSettingsBox_mqtt_topic" class="w3-input w3-border" style="width:50%" type="text" value="обновляю">
							</div>
					  	</div>
								
						<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_mqtt_port">Порт</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_mqtt_port" name="espSettingsBox_mqtt_port" class="w3-input w3-border" style="width:50%" type="number" min="1" step="1">
							</div>
					  	</div>
					  	
					  	<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_mqtt_TStopic">Очередь получения данных из ThingSpeak</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_mqtt_TStopic" name="espSettingsBox_mqtt_TStopic" class="w3-input w3-border" style="width:50%" type="number" min="1" step="1">
							</div>
					  	</div>
						
						<div class="w3-row w3-green" style="height: 50px;">
							<h3>Отправка на сервер !!!SmartHouse</h3>
						</div>	
						
						<div class="w3-row">
							<div class="w3-half">	
								<label for="espSettingsBox_isHttpPostEnabled">Отправка разрешена</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_isHttpPostEnabled" name="espSettingsBox_isHttpPostEnabled" class="w3-check" type="checkbox">
							</div>
					  	</div>
					  	
				  	  	<div class="w3-row">
							<div class="w3-half">			
								<label for="espSettingsBox_postDataToHttpInterval">Интервал отправки по Http</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_postDataToHttpInterval" name="espSettingsBox_postDataToHttpInterval" class="w3-input w3-border" style="width:50%" type="number" min="240" step="1">
							</div>
					  	</div>
						
						<div class="w3-row">
							<div class="w3-half">
								<label id="lbl_httpPostIp" for="espSettingsBox_httpPostIp">IP адресс отправки данных по Http</label>
							</div>
					  		<div class="w3-half">
								<input id="espSettingsBox_httpPostIp" name="espSettingsBox_httpPostIp" class="w3-input w3-border" style="width:50%" type="text" 
									value="" pattern="^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
							</div>
					  	</div>
					  	
					</form>  
				  </div>
				  
				  <p>
			  		<button id="savePublishSettingsBtn" class="w3-btn w3-teal" style="margin-left: 20px; margin-bottom: 20px;"
							onclick="submitCurrentForm();">Сохранить</button>
				  </p>
				
				
				<div id="publish_msg" class="w3-card-4" style="margin-left:20px; margin-right:20px; margin-bottom:20px;"></div>
				
				<div style="height:20px;"></div>
		</div>
		
		<div id="manage" class="settingsTab" style="display:none">
			<div class="w3-container w3-teal">
				<h2>Управление</h2>
			</div>
			
			  <p>Общее управление устройством</p>
			   <div id="manage_content">
			  		<button class="w3-button w3-white w3-border w3-border-red w3-round-large" onclick="openConfirmPopup('Подтвердите рестарт устройства','restart');"
			  			style="margin-left: 10px; margin-top: 10px; margin-bottom: 10px;">
	  	 				Перезапустить устройство
					</button>
					
					<button class="w3-button w3-white w3-border w3-border-red w3-round-large" onclick="openConfirmPopup('Подтвердите пересоздание каналов ThingSpeak. Внимание очереди датчиков также будут обновлены','recreateThingSpeak');"
			  			style="margin-left: 10px; margin-top: 10px; margin-bottom: 10px;">
	  	 				Пересоздать каналы ThingSpeak
					</button>
					
					<button class="w3-button w3-white w3-border w3-border-red w3-round-large" onclick="openConfirmPopup('Внимание. Все файлы настроек будут удалены. Устройство загрузится с настройками по умолчанию.','deleteSettings');"
			  			style="margin-left: 10px; margin-top: 10px; margin-bottom: 10px;">
	  	 				Удалить файлы настроек
					</button>
			  </div>
		</div>
		
		<div id="confirm_modal" class="w3-modal">
		    <div class="w3-modal-content w3-animate-top w3-card-4">
		      	
		      	<header class="w3-container w3-teal"> 
			      <span id="confirm_headerCloseBtn" onclick="hideComponent('confirm_modal');" class="w3-button w3-display-topright">&times;</span>
			      <form>
			      	<h3 id="confirm_header">Подтвердите действие</h3>
			      </form>
			    </header>
		      	
		      	<div class="w3-container">
   
		        	<form id="confirm_form" class="w3-container" style="margin: 10px;">
		        		<input id="confirm_command" name="confirm_command" type="hidden">
		        		
		        		<div id=confirm_content>
		        		
						</div>						
						
						<div id="confirm_msg" class="w3-card-4" style="margin-top: 2px; margin-bottom: 2px;"></div>
				
						<div style="height:2px;"></div>
						
					</form>
				
				 </div>
				 
				 <footer class="w3-container w3-teal w3-display-container">
				 		<div class="w3-row w3-half">
				 			<div class="w3-half">
							      <button id="confirm_okBtn" class="w3-btn w3-white w3-border w3-border-green w3-round-large" style="margin-top: 2px; margin-bottom: 2px;"
										onclick="">Подтвердить</button>
							</div>
							<div class="w3-half">
								  <button id="confirm_cancelBtn" class="w3-btn w3-white w3-border w3-border-red w3-round-large" style="margin-top: 2px; margin-bottom: 2px;"
										onclick="hideComponent('confirm_modal');">Отменить</button>
							</div>
							<div class="w3-half">
								  <button id="confirm_closeBtn" class="w3-btn w3-white w3-border w3-border-red w3-round-large" style="margin-top: 2px; margin-bottom: 2px;"
										onclick="hideComponent('confirm_modal');">Закрыть</button>
							</div>
						</div>
    			</footer>
	        
		  </div>
		</div>
		
		
		<!--
		<form id="settingsForm" class="w3-container" action="/settings" method="POST">
			
			<div id="sensorsTable" class="w3-container">
				
			</div>
			
			<div id="msgContent" class="w3-card-4" style="margin-left:10px; margin-right:10px; margin-top:10px; margin-bottom:10px;">
			</div>
			
			<p><button class="w3-btn w3-teal" onclick="submitForm(&#39;sensors&#39;,&#39;settForm&#39;,&#39;msgContent&#39;);">Сохранить</button>
			</p><p></p>
		</form>
		-->
		
	</div>
	
</div>
</body>
</html>